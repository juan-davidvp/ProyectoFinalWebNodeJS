<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Davivienda</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        /* === INICIO ESTILOS GLOBALES Y SCROLL === */
        html {
            scroll-behavior: smooth; /* Habilita el scroll suave para anclas y JavaScript */
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0; /* Eliminamos el padding-top anterior del body */
            overflow-y: hidden; /* Permitir scroll vertical */
        }

        /* === FIN ESTILOS GLOBALES Y SCROLL === */

        /* === INICIO ESTILOS HEADER (Mantenidos de la versión anterior) === */
        .davivienda-red-bg {
            background-color: #E31E24;
        }
        .davivienda-light-gray-bg {
            background-color: #F3F4F6;
        }
        .davivienda-main-red-bar {
            padding-top: 0.6rem;
            padding-bottom: 0.6rem;
        }
        
        .davivienda-main-red-bar .nav-link {
            color: white; font-size: 0.875rem; font-weight: 500; padding: 0.5rem 0.75rem; border-radius: 0.375rem;
        }
        
        .davivienda-main-red-bar .nav-link:hover,
        .davivienda-main-red-bar .nav-link.active {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .davivienda-main-red-bar .nav-link svg {
            width: 1rem; height: 1rem; margin-right: 0.5rem;
        }
        .davivienda-help-links {
            font-size: 0.75rem; color: white;
        }
        .davivienda-help-links div { margin-bottom: 0.25rem; }
        .davivienda-help-links div:hover { text-decoration: underline; cursor: pointer; }
        .btn-davivienda-login-main {
            background-color: #E31E24; border: 1px solid white; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 500;
        }
        .btn-davivienda-login-main:hover {
            background-color: #C41E24; border-color: #f0f0f0; color: white;
        }
        .btn-davivienda-login-main svg {
            width: 1rem; height: 1rem; margin-right: 0.5rem;
        }
        .davivienda-aqui-puedo-bar {
            border-bottom: 1px solid #e5e7eb;
            width: 100%;
            clear: both;
            background-color: #fff;
            z-index: 1;
            height: 50px;
            position: relative;
        }
        .btn-aqui-puedo {
            font-weight: 500; color: #4B5563; background: none; border: none; margin: -1px 0 0; float: left;
        }
        .btn-aqui-puedo:hover { color: #1F2937; }
        .btn-aqui-puedo svg {
            width: 1rem; height: 1rem; transition: transform 0.2s;
        }
        .btn-aqui-puedo[aria-expanded="true"] img { background-image: url('imagenes/iconos/btn_aqui_puedo_Activo.png'); }
        .aqui-puedo-quick-links a {
            font-size: 0.875rem; color: #E31E24; text-decoration: none; 
        }
        .aqui-puedo-quick-links a:hover { color: #C41E24; }
        .aqui-puedo-quick-links svg {
            width: 1rem; height: 1rem; margin-right: 0.5rem;
        }
        #aquiPuedoDropdownTsx .dropdown-menu-content {
            border-top: 1px solid #e5e7eb; height: 100vh;
        }
        #aquiPuedoDropdownTsx h5 {
            color: #E31E24; font-weight: 600; margin-bottom: 0.75rem; font-size: 1rem;
        }
        #aquiPuedoDropdownTsx h5 svg {
            width: 1.25rem; height: 1.25rem; margin-right: 0.5rem;
        }
        #aquiPuedoDropdownTsx ul { list-style: none; padding-left: 0; }
        #aquiPuedoDropdownTsx ul li { margin-bottom: 0.5rem; }
        #aquiPuedoDropdownTsx ul li a {
            font-size: 0.875rem; color: #4B5563; text-decoration: none;
        }
        #aquiPuedoDropdownTsx ul li a:hover { color: #E31E24; }
        #aquiPuedoDropdownTsx .bottom-links a {
            font-size: 0.875rem; color: #E31E24; text-decoration: none;
        }
        #aquiPuedoDropdownTsx .bottom-links a:hover { color: #C41E24; }
        #aquiPuedoDropdownTsx .bottom-links svg,
        #aquiPuedoDropdownTsx .bottom-links .icon-placeholder {
            width: 1rem; height: 1rem; margin-right: 0.5rem;
        }
        #aquiPuedoDropdownTsx .icon-placeholder {
            display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; font-size: 0.75rem;
        }
        #aquiPuedoDropdownTsx .icon-placeholder.bg-yellow { background-color: #FBBF24; color: #92400E; }
        #aquiPuedoDropdownTsx .icon-placeholder.bg-red { background-color: #EF4444; color: white; }
        #aquiPuedoDropdownTsx .icon-placeholder.bg-green { background-color: #10B981; color: white; }
        /* === FIN ESTILOS HEADER === */

        /* === INICIO NUEVOS ESTILOS PARA SECCIONES FULL-SCREEN === */

        /* Requirement 1 & 3: Scroll-snap implementation */
    .scroll-snap-container {
        scroll-snap-type: y mandatory; /* Enable vertical scroll snapping */
        scroll-behavior: smooth; /* Smooth scrolling transitions */
        height: calc(100vh - 110px); /* Height minus header */
        overflow-y: auto;
        margin-top: 110px; /* Start below the fixed header */
    }

    /* Requirement 1: Each section with scroll-snap-align covering full available screen */
    .snap-section {
        scroll-snap-align: start; /* Enable scroll snapping for each section */
        min-height: calc(100vh - 110px); /* Full screen minus header height */
        display: flex;
        align-items: center;
        position: relative;
    }

    /* Requirement 1: Background colors matching Davivienda brand */
    .text-davivienda {
        color: #E31E24 !important; /* Davivienda red */
    }

    .btn-davivienda {
        background-color: #E31E24; /* Davivienda red background */
        border-color: #E31E24;
        color: white; /* White text */
        transition: all 0.3s ease;
    }

    .btn-davivienda:hover {
        background-color: #C41E24; /* Darker red on hover */
        border-color: #C41E24;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(227, 30, 36, 0.3);
    }

    /* Requirement 1: Red/white gradient for hero section */
    .bg-gradient-davivienda {
        background: linear-gradient(135deg, #E31E24 0%, #FF6B6B 50%, #FFFFFF 100%);
    }

    /* Requirement 5: Content wrapper for text alignment */
    .content-wrapper {
        max-width: 1000px;
        padding: 2rem;
        padding-left: 4rem;
    }

    /* Requirement 6: Three-dot navigation enhancement */
    #side-navigation-dots {
        position: fixed;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
        list-style: none;
        padding: 0;
        margin: 0;
        z-index: 1031;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 25px;
        padding: 15px 8px;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    #side-navigation-dots li a {
        display: block;
        width: 16px;
        height: 16px;
        margin-bottom: 15px;
        background-color: rgba(227, 30, 36, 0.3);
        border-radius: 50%;
        text-indent: -9999px;
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }

    #side-navigation-dots li:last-child a {
        margin-bottom: 0;
    }

    /* Requirement 6: Active state for navigation dots */
    #side-navigation-dots li a:hover,
    #side-navigation-dots li a.active {
        background-color: #E31E24;
        border-color: #E31E24;
        transform: scale(1.2);
        box-shadow: 0 2px 8px rgba(227, 30, 36, 0.4);
    }

    /* Smooth scroll enhancement for better browser compatibility */
    html {
        scroll-behavior: smooth;
    }

    /* Focus states for accessibility */
    .btn-davivienda:focus,
    #side-navigation-dots li a:focus {
        outline: 3px solid rgba(227, 30, 36, 0.5);
        outline-offset: 2px;
    }
        /* === FIN NUEVOS ESTILOS PARA SECCIONES FULL-SCREEN === */

        /* Estilos navegación lateral (sin cambios mayores) */
        #side-navigation-dots { position: fixed; top: 50%; right: 20px; transform: translateY(-50%); list-style: none; padding: 0; margin: 0; z-index: 1031; } /* z-index mayor que el header */
        #side-navigation-dots li a { display: block; width: 12px; height: 12px; margin-bottom: 10px; background-color: rgba(227, 0, 27, 0.5); border-radius: 50%; text-indent: -9999px; }
        #side-navigation-dots li a:hover, #side-navigation-dots li a.active { background-color: #e3001b; }

        /* Footer (sin cambios mayores) */
        .footer-davivienda { background-color: #343a40; color: #adb5bd; }
        .footer-davivienda h5 { color: #fff; }
        .footer-davivienda a { color: #adb5bd; font-size: 0.9rem; }
        .footer-davivienda a:hover { color: #fff; }
    </style>
</head>
<body>

    <header class="fixed-top shadow-lg">
        <div class="davivienda-main-red-bar davivienda-red-bg">
            <div class="container">
                <div class="d-flex align-items-center justify-content-evenly">
                    <a href="#" title="Volver a Home personas" class="davivienda-logo text-decoration-none d-flex align-items-center">
                        <img src="/imagenes/logo-davivienda-blanco.png" alt="Davivienda">
                    </a>
                    <div class="d-none d-md-flex align-items-center">
                        <nav class="d-flex align-items-center me-4">
                            <a href="#" class="nav-link active d-flex align-items-center"><img loading="lazy" class="img_indicador d-none d-md-block px-2" src="/imagenes/iconos/personas.png">PERSONAS </a>
                            <a href="#" class="nav-link d-flex align-items-center"><img loading="lazy" class="img_indicador d-none d-md-block px-2" src="/imagenes/iconos/empresas.png">EMPRESAS</a>
                        </nav>
                        <div class="davivienda-help-links d-none d-lg-block text-start me-4">
                            <div>▶ ¿Quiénes somos?</div>
                            <div>▶ Información para inversionistas</div>
                            <div>▶ Información adicional</div>
                        </div>
                        <a href="/login" class="btn btn-davivienda-login-main d-flex align-items-center" role="button">
                            <img loading="lazy" class="img_indicador d-none d-md-block me-3" src="/imagenes/iconos/loginClose.png">
                            <span>INGRESO<br class="d-none d-md-block"> CLIENTES</span>
                        </a>
                        
                    </div>
                    <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#aquiPuedoDropdownTsx" aria-controls="aquiPuedoDropdownTsx" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </div>
        </div>
        <div class="davivienda-aqui-puedo-bar davivienda-light-gray-bg">
            <div class="container position-absolute h-100 z-2" style="margin-left: 15%;">
                <button class="btn-aqui-puedo " type="button" data-bs-toggle="collapse" data-bs-target="#aquiPuedoDropdownTsx" aria-expanded="false" aria-controls="aquiPuedoDropdownTsx">
                    <img loading="lazy" class="img_indicador d-none d-md-block me-3"  src="/imagenes/aquiPuedo.png">
                </button>
                <div class="aqui-puedo-quick-links h-100 float-end mx-3 mt-2">
                    <a href="#" class=" me-4">
                        <img src="/imagenes/iconos/abrir-productos-linea.png" width="28" height="28" fill="currentColor" class="bi bi-bag" >
                        <span>Abrir Productos en línea</span>
                    </a>
                    <a href="#" class="">
                        <img src="/imagenes/iconos/ICO_PAGOS_EN_LINEA_PSE.png" width="28" height="28" fill="currentColor" class="bi bi-bag" >
                        <span>Pagos en línea y PSE</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="collapse" id="aquiPuedoDropdownTsx">
            <div class="dropdown-menu-content bg-white">
                <img src="/imagenes/aqui-puedo02.png " alt="Davivienda" class="position-absolute" style="width: 100%; height: 100vh;">
                <div class="container p-4 mt-5 position-relative">
                    <div class="row">
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_01.png" width="36" height="36" class="bi bi-bag" >Construir mi futuro</h5>
                            <ul><li><a href="#">▶ Vivienda</a></li><li><a href="#">▶ Vehículo</a></li><li><a href="#">▶ Inversiones</a></li><li><a href="#">▶ Pensión</a></li><li><a href="#">▶ Educación</a></li><li><a href="#">▶ Ahorros</a></li><li><a href="#">▶ Mi comercio</a></li><li><a href="#">▶ Vender con código QR</a></li></ul>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_02.png" width="36" height="36" class="bi bi-bag" ></svg>Manejar mi dinero</h5>
                            <ul><li><a href="#">▶ Portafolio Banca Personal</a></li><li><a href="#">▶ Cuentas Transaccionales</a></li><li><a href="#">▶ Planificación de Impuestos</a></li><li><a href="#">▶ Tarjetas Débito</a></li><li><a href="#">▶ Giros Internacionales</a></li><li><a href="#">▶ Multitransferencias</a></li></ul>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_03.png" width="36" height="36" class="bi bi-bag" ></svg>Alcanzar lo que quiero</h5>
                            <ul><li><a href="#">▶ Créditos de Libre Inversión</a></li><li><a href="#">▶ Crédito Descontado de Nómina</a></li><li><a href="#">▶ Crédito Compra de Cartera</a></li><li><a href="#">▶ Crédito Zuora</a></li></ul>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_04.png" width="36" height="36" class="bi bi-bag" >Comprar lo que deseo</h5>
                            <ul><li><a href="#">▶ Tarjeta de Crédito</a></li><li><a href="#">▶ Mundo Diners</a></li><li><a href="#">▶ Tarjetas Prepago y Ecard</a></li><li><a href="#">▶ Davipuntos</a></li><li><a href="#">▶ Asistencias y Beneficios</a></li><li><a href="#">▶ Compras Virtuales</a></li><li><a href="#">▶ Compras Davivienda</a></li></ul>
                        </div>
                    </div>
                    <div class="row mt-md-4">
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_08.png" width="36" height="36" class="bi bi-bag" ></svg>Respaldar a mi familia</h5>
                            <ul><li><a href="#">▶ Portafolio Familia</a></li><li><a href="#">▶ Tarjetas Amparadas</a></li><li><a href="#">▶ Cuenta Niños</a></li><li><a href="#">▶ Tarjeta Mujer</a></li></ul>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_05.png" width="36" height="36" class="bi bi-bag" ></svg>Administrar mis inversiones</h5>
                            <ul><li><a href="#">▶ Davivienda Panamá</a></li><li><a href="#">▶ Davivienda Miami</a></li><li><a href="#">▶ Davivienda Corredores</a></li><li><a href="#">▶ Corredores Asociados Panamá</a></li><li><a href="#">▶ Davivienda Advisors</a></li></ul>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_06.png" width="36" height="36" class="bi bi-bag" >Proteger mi patrimonio</h5>
                            <ul><li><a href="#">▶ Seguros para Familia</a></li><li><a href="#">▶ Seguros para Bienes</a></li><li><a href="#">▶ Seguros para Casa</a></li><li><a href="#">▶ Seguros para Carro</a></li><li><a href="#">▶ Asistencias</a></li></ul>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3 mb-4">
                            <h5><img src="imagenes/iconos02/menu_07.png" width="36" height="36" class="bi bi-bag" >Pagar fácilmente</h5>
                            <ul><li><a href="#">▶ Mis Pagos Automáticos</a></li><li><a href="#">▶ Pagos en Línea y PSE</a></li><li><a href="#">▶ Servicios de Información y Pagos</a></li><li><a href="#">▶ Transferencias Automáticas</a></li><li><a href="#">▶ Comprar con Código QR</a></li><li><a href="#">▶ Apple Pay</a></li><li><a href="#">▶ Google Pay</a></li></ul>
                        </div>
                    </div>
                    <div class="bottom-links d-flex flex-wrap justify-content-center gap-3 mt-4 pt-4 border-top"> 
                        <a href="#" class="d-flex align-items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-phone-fill" viewBox="0 0 16 16"><path d="M3 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm6 11a1 1 0 1 0-2 0 1 1 0 0 0 2 0"/></svg>
                            <span>Conocer DaviPlata</span>
                        </a>
                        <a href="#" class="d-flex align-items-center">
                            <span class="icon-placeholder bg-yellow">$</span>
                            <span>Educación Financiera</span>
                        </a>
                        <a href="#" class="d-flex align-items-center">
                            <span class="icon-placeholder bg-red">✈</span>
                            <span>Asesorarme si vivo o viajo al exterior</span>
                        </a>
                        <a href="#" class="d-flex align-items-center">
                            <span class="icon-placeholder bg-green">$</span>
                            <span>Defensor del consumidor financiero</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <aside>
        <ul id="side-navigation-dots">
            <li><a href="#bienvenido" title="Bienvenido" class="active">B</a></li>
            <li><a href="#app-davivienda" title="App Davivienda">A</a></li>
            <li><a href="#seguridad" title="Seguridad Davivienda">S</a></li>
        </ul>
    </aside>
<main>
    <!-- Requirement 1 & 3: Overall Page Structure with Scroll-Snapping Sections -->
    <!-- scroll-snap-type: y mandatory applied to enable vertical scroll snapping -->
    <div id="fullpage-main-content" class="scroll-snap-container">
        
        <!-- Section 1: Promotional Section (Debit Mastercard offer) -->
        <!-- MODIFIED: Added background image from imagenes/IMG-DESK-TIA-SEGURA.jpg -->
        <!-- Requirement 1: Each section uses scroll-snap-align: start -->
        <!-- Requirement 1: Minimum height of 100vh for full-screen visibility -->
        <section id="bienvenido" class=" snap-section" style="background-image: url('imagenes/IMG-DESK-TIA-SEGURA.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;">
            <div class="container-fluid h-100">
                <div class="h-100">
                    <!-- Requirement 5: Text and Button Alignment - vertically centered and left-aligned -->
                    <div class="d-flex align-items-center">
                        <div class="content-wrapper ">
                            <p class="lead fs-3 text-white mb-1" style="line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
                                Participe por premios usando su
                            </p>
                            <h2 class="display-4 fw-bold text-white mb-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7); font-size: 4rem;">
                                Tarjeta Débito <span class="text-warning">Mastercard</span>
                            </h2>
                            <!-- Requirement 5: Consistent button styling (red background, white text) -->
                            <a href="#" class="btn btn-davivienda btn-lg px-5 py-3 fw-semibold">
                                Inscribáse ya
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Hero Section (red/white gradient with app promotion) -->
        <!-- MODIFIED: Added background image from imagenes/entrega+publicacion+-escritorio.jpg -->
        <!-- Requirement 1: Background colors matching Davivienda brand -->
        <section id="app-davivienda" class="full-screen-section snap-section" style="background-image: url('imagenes/entrega+publicacion+-escritorio.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;">
            <div class="container-fluid h-100">
                <div class="row h-100">
                    <!-- Requirement 5: Text and buttons vertically centered and left-aligned -->
                    <div class="d-flex align-items-center">
                        <div class="content-wrapper">
                            <p class="lead fs-3 text-white mb-1" style="line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
                                En la App Davivienda todo es más
                            </p>
                            <h2 class="display-4 fw-bold text-white mb-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.8); font-size: 4rem;">
                                fácil y sin salir de la <span class="text-warning"> App.</span>
                            </h2>
                            
                            <!-- Requirement 5: Consistent button styling -->
                            <a href="#" class="btn btn-light btn-lg px-5 py-3 fw-semibold text-davivienda">
                                Conozca más aquí
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Security Section (image of person with "Tía Segura" graphic) -->
        <!-- MODIFIED: Added background image from imagenes/240429-BANNER-DAV-V1+(1).jpg -->
        <section id="seguridad" class="full-screen-section snap-section bg-light" style="background-image: url('imagenes/240429-BANNER-DAV-V1+(1).jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;">
            <div class="container-fluid h-100">
                <div class="row h-100">
                    <!-- Requirement 5: Text and button alignment -->
                    <div class="d-flex align-items-center">
                        <div class="content-wrapper ">
                            <p class="lead fs-3 text-white mb-1" style="line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
                                Le tenemos los tips para que
                            </p>
                            <h2 class="display-4 fw-bold text-white mb-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.8); font-size: 4.5rem; ">
                                no lo <span class="text-warning">engañen</span>
                            </h2>
                            
                            <!-- Requirement 5: Consistent button styling -->
                            <a href="#" class="btn btn-davivienda btn-lg px-5 py-3 fw-semibold">
                                Conozca más aquí
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</main>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sections = document.querySelectorAll('.snap-section[id]');
            const navLinks = document.querySelectorAll('#side-navigation-dots a');
            const headerOffset = 110; // Fixed header offset

    // Requirement 6: Three-dot navigation with active state management
    function updateActiveNavigation() {
        let index = sections.length;
        const scrollPosition = window.scrollY + headerOffset;
        
        // Find the current section in view
        while(--index >= 0 && scrollPosition < sections[index].offsetTop + 50) {}
        
        // Update active states
        navLinks.forEach((link) => link.classList.remove('active'));
        if (navLinks[index]) {
            navLinks[index].classList.add('active');
        } else if (navLinks.length > 0 && window.scrollY < sections[0].offsetTop - headerOffset - 50) {
            navLinks[0].classList.add('active');
        }
    }

    // Initialize and listen for scroll events
    updateActiveNavigation();
    
    // Requirement 3: Smooth scrolling with throttling for performance
    let scrollTimeout;
    window.addEventListener('scroll', function() {
        if (scrollTimeout) {
            clearTimeout(scrollTimeout);
        }
        scrollTimeout = setTimeout(updateActiveNavigation, 10);
    });

    // Requirement 6: Navigation dot click handlers with smooth scrolling
    navLinks.forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                // Requirement 3: Smooth scrolling implementation
                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        });
    });

    // Requirement 3: Fallback for browsers that don't support CSS scroll-snap
    if (!CSS.supports('scroll-snap-type', 'y mandatory')) {
        console.log('Implementing fallback scroll-snap behavior');
        
        let isScrolling = false;
        let scrollTimer;
        
        window.addEventListener('scroll', function() {
            if (!isScrolling) {
                isScrolling = true;
            }
            
            clearTimeout(scrollTimer);
            scrollTimer = setTimeout(function() {
                isScrolling = false;
                snapToNearestSection();
            }, 150);
        });
        
        function snapToNearestSection() {
            const scrollPosition = window.scrollY + headerOffset;
            let closestSection = sections[0];
            let closestDistance = Math.abs(sections[0].offsetTop - scrollPosition);
            
            sections.forEach(section => {
                const distance = Math.abs(section.offsetTop - scrollPosition);
                if (distance < closestDistance) {
                    closestDistance = distance;
                    closestSection = section;
                }
            });
            
            if (closestDistance > 100) { // Only snap if not already close
                const targetPosition = closestSection.offsetTop - headerOffset;
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        }
    }

            function changeNav() {
                let index = sections.length;
                // Ajuste en la condición del bucle para considerar el headerOffset
                while(--index >= 0 && window.scrollY + headerOffset < sections[index].offsetTop + 50 ) {} // +50 para activar un poco antes
                
                navLinks.forEach((link) => link.classList.remove('active'));
                if (navLinks[index]) { // Asegurarse de que el índice es válido
                    navLinks[index].classList.add('active');
                } else if (navLinks.length > 0 && window.scrollY < sections[0].offsetTop - headerOffset - 50) {
                    // Si estamos por encima de la primera sección, activar el primer link
                    navLinks[0].classList.add('active');
                }
            }
            changeNav(); // Llamada inicial
            window.addEventListener('scroll', changeNav);

            navLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: "smooth"
                        });
                    }
                });
            });

            // Funcionalidad para el botón "Aquí puedo" (si no se usa navbar-toggler para ello)
            // Bootstrap maneja el colapso con data-bs-toggle y data-bs-target,
            // pero si se necesita lógica adicional, se puede añadir aquí.
            // Por ejemplo, para cambiar la flecha del botón "Aquí puedo":
            const aquiPuedoButton = document.querySelector('.btn-aqui-puedo');
            const aquiPuedoDropdown = document.getElementById('aquiPuedoDropdownTsx');

            if (aquiPuedoButton && aquiPuedoDropdown) {
                aquiPuedoDropdown.addEventListener('show.bs.collapse', function () {
                    aquiPuedoButton.setAttribute('aria-expanded', 'true');
                });
                aquiPuedoDropdown.addEventListener('hide.bs.collapse', function () {
                    aquiPuedoButton.setAttribute('aria-expanded', 'false');
                });
            }
        });
    </script>
</body>
</html>
